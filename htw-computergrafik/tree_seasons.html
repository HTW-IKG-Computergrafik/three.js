<!DOCTYPE html>
<html>
  <head>
    <title>Seasonal 3D Tree</title>
    <style>
      body { margin: 0; }
      canvas { display: block; }
    </style>
  </head>
  <body>
    <script src="https://threejs.org/build/three.js"></script>
    <script>
      var scene,
          camera,
          renderer,
          geometry,
          group,
          leafGeometry;

     
      var materials = {
        spring: {
          leafDark: new THREE.MeshLambertMaterial({ color: 0x91E56E }),
          leafLight: new THREE.MeshLambertMaterial({ color: 0xA2FF7A }),
          leafDarkDark: new THREE.MeshLambertMaterial({ color: 0x71B356 })
        },
        summer: {
          leafDark: new THREE.MeshLambertMaterial({ color: 0x1D953F }),
          leafLight: new THREE.MeshLambertMaterial({ color: 0x50D17B }),
          leafDarkDark: new THREE.MeshLambertMaterial({ color: 0x3D6D4D })
        },
        autumn: {
          leafDark: new THREE.MeshLambertMaterial({ color: 0xFF8000 }),
          leafLight: new THREE.MeshLambertMaterial({ color: 0xFFA500 }),
          leafDarkDark: new THREE.MeshLambertMaterial({ color: 0x8B4513 })
        },
        winter: {
          leafDark: new THREE.MeshLambertMaterial({ color: 0x8CCDEA }),
          leafLight: new THREE.MeshLambertMaterial({ color: 0xB3E0F5 }),
          leafDarkDark: new THREE.MeshLambertMaterial({ color: 0x7BA4C5 })
        }
      };

      var seasons = ['spring', 'summer', 'autumn', 'winter'];
      var currentSeason = seasons.length - 1;

      init();
      render();

      function init() {
        scene = new THREE.Scene();

        camera = new THREE.PerspectiveCamera(100, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 5;

        geometry = new THREE.BoxGeometry(1, 1, 1);

        leafGeometry = new THREE.BoxGeometry(0.2, 0.2, 0.2); 

        var light = new THREE.DirectionalLight(0xEEFFD3, 1);
        light.position.set(0, 0, 1);
        scene.add(light);

        var light = new THREE.DirectionalLight(0xFF0000, 0.4);
        light.position.set(1, 0, 0);
        scene.add(light);

        var light = new THREE.DirectionalLight(0xFFFFFF, 0.2);
        light.position.set(0, 1, 0);
        scene.add(light);

        var stemMaterial = new THREE.MeshLambertMaterial({ color: 0x7D5A4F });

        var trunk = new THREE.Mesh(geometry, stemMaterial);
        trunk.position.set(0, 0, 0);
        trunk.scale.set(0.3, 2, 0.3); 

        var branchMaterial = new THREE.MeshLambertMaterial({ color: 0x7D5A4F });
        var branch = new THREE.Mesh(geometry, branchMaterial);
        branch.position.set(0, 1.5, 0);
        branch.scale.set(0.7, 0.4, 0.7); 

        var numLeaves = 240; 

        var leaveDark = createLeaf(numLeaves, materials[seasons[currentSeason]].leafDark);
        leaveDark.position.set(0, 2, 0); 
        leaveDark.scale.set(1.2, 1.2, 1.2); 

        var leaveLight = createLeaf(numLeaves, materials[seasons[currentSeason]].leafLight);
        leaveLight.position.set(0, 2, 0); 
        leaveLight.scale.set(1.3, 0.8, 1.3); 

        var ground = new THREE.Mesh(geometry, materials[seasons[currentSeason]].leafDarkDark);
        ground.position.set(0, -1, 0);
        ground.scale.set(2.4, 0.8, 2.4);

        tree = new THREE.Group();
        tree.add(leaveDark);
        tree.add(leaveLight);
        tree.add(ground);
        tree.add(trunk);
        tree.add(branch); 

        tree.rotation.y = 1;
        tree.rotation.x = 0.5;

        scene.add(tree);

        renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);

        document.body.appendChild(renderer.domElement);
      }

      
      function createLeaf(numLeaves, material) {
        var leafGroup = new THREE.Group();

        for (var i = 0; i < numLeaves; i++) {
          var leaf = new THREE.Mesh(leafGeometry, material);
          leaf.position.x = Math.random() * 2 - 1; 
          leaf.position.y = Math.random() * 2 - 1; 
          leaf.position.z = Math.random() * 2 - 1; 
          leaf.rotation.x = Math.random() * 2 * Math.PI; 
          leaf.rotation.y = Math.random() * 2 * Math.PI; 
          leaf.rotation.z = Math.random() * 2 * Math.PI; 

          leafGroup.add(leaf);
        }

        return leafGroup;
      }

      function render() {
        requestAnimationFrame(render);

        // Every 3 seconds
        if (Date.now() % 3000 < 50) {
          currentSeason = (currentSeason - 1 + seasons.length) % seasons.length;
          var season = seasons[currentSeason];

          tree.children[0].children.forEach(function(leaf) {
            leaf.material = materials[season].leafDark;
          });
          tree.children[1].children.forEach(function(leaf) {
            leaf.material = materials[season].leafLight;
          });
          tree.children[2].material = materials[season].leafDarkDark;
        }

        tree.rotation.y += 0.007;

        renderer.render(scene, camera);
      }
    </script>
  </body>
</html>
